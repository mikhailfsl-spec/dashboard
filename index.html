<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>My Dashboard</title>

<style>
body { margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial; background:#0b0f17; color:#e5e7eb; }
header { padding:16px; font-size:18px; font-weight:600; border-bottom:1px solid #1f2937; }
.grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:16px; padding:16px; }
.card { background:#111827; border:1px solid #1f2937; border-radius:14px; padding:14px; }
.title { font-size:12px; color:#94a3b8; text-transform:uppercase; }
.subtitle { font-size:11px; color:#64748b; }
.value { font-size:28px; font-weight:700; margin-top:8px; white-space:nowrap; }
</style>
</head>

<body>
<header>My Dashboard</header>

<div class="grid">
  <div class="card">
    <div class="title">Bitcoin</div>
    <div class="subtitle">BTC / USD (Coinbase)</div>
    <div class="value" id="btc">—</div>
  </div>

  <div class="card">
    <div class="title">Gold</div>
    <div class="subtitle">USD / oz (daily)</div>
    <div class="value" id="gold">—</div>
  </div>

  <div class="card">
    <div class="title">Brent</div>
    <div class="subtitle">UKOIL (ICE, near-live)</div>
    <div class="value" id="brent">—</div>
  </div>

  <div class="card">
    <div class="title">FX</div>
    <div class="subtitle">GBP → USD</div>
    <div class="value" id="fx">—</div>
  </div>
</div>

<div class="grid" id="clocks"></div>

<script>
/* CLOCKS */
const CITIES = [
 {name:"GMT",tz:"Etc/GMT"},
 {name:"London",tz:"Europe/London"},
 {name:"Moscow",tz:"Europe/Moscow"},
 {name:"Dubai",tz:"Asia/Dubai"},
 {name:"Singapore",tz:"Asia/Singapore"},
 {name:"Vladivostok",tz:"Asia/Vladivostok"}
];
const clocksEl=document.getElementById("clocks");
function tf(tz){return new Intl.DateTimeFormat("en-GB",{timeZone:tz,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});}
function renderClocks(){
  clocksEl.innerHTML="";
  const n=new Date();
  for(const c of CITIES){
    const d=document.createElement("div");
    d.className="card";
    d.innerHTML=`<div class="title">${c.name}</div><div class="subtitle">${c.tz}</div><div class="value">${tf(c.tz).format(n)}</div>`;
    clocksEl.appendChild(d);
  }
}
renderClocks();
setInterval(renderClocks,1000);

/* HELPERS */
const n2=x=>Number(x).toLocaleString("en-GB",{maximumFractionDigits:2});
const n4=x=>Number(x).toLocaleString("en-GB",{maximumFractionDigits:4});

/* BTC */
async function updateBTC(){
 try{
  const r=await fetch("https://api.coinbase.com/v2/prices/BTC-USD/spot",{cache:"no-store"});
  const j=await r.json();
  document.getElementById("btc").textContent=n2(j.data.amount);
 }catch{document.getElementById("btc").textContent="N/A";}
}

/* GOLD */
async function updateGold(){
 try{
  const r=await fetch("https://freegoldapi.com/data/latest.json",{cache:"no-store"});
  const j=await r.json();
  document.getElementById("gold").textContent=n2(j[j.length-1].price);
 }catch{document.getElementById("gold").textContent="N/A";}
}

/* BRENT — THIS IS THE FIX */
const TWELVE_KEY="e81416058762419bbe5115de5cc93eb5";
async function updateBrent(){
 try{
  const url=`https://api.twelvedata.com/quote?symbol=UKOIL&exchange=ICE&apikey=${TWELVE_KEY}`;
  const r=await fetch(url,{cache:"no-store"});
  const j=await r.json();
  if(j.price){
    document.getElementById("brent").textContent=n2(j.price);
  }else{
    document.getElementById("brent").textContent="N/A";
  }
 }catch{
  document.getElementById("brent").textContent="N/A";
 }
}

/* FX */
async function updateFX(){
 try{
  const r=await fetch("https://api.frankfurter.dev/v1/latest?from=GBP&to=USD",{cache:"no-store"});
  const j=await r.json();
  document.getElementById("fx").textContent=n4(j.rates.USD);
 }catch{document.getElementById("fx").textContent="N/A";}
}

/* REFRESH */
function refreshAll(){
 updateBTC();
 updateGold();
 updateBrent();
 updateFX();
}
refreshAll();
setInterval(refreshAll,60000);
</script>
</body>
</html>
